

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Usage &mdash; php7-sapnwrfc 1.3.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API" href="api.html" />
    <link rel="prev" title="Installation" href="installation.html" />
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-108703036-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-108703036-1');
</script>
 

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> php7-sapnwrfc
          

          
          </a>

          
            
            
              <div class="version">
                1.3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#connecting-to-a-sap-system">Connecting to a SAP system</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#connection-options">Connection options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#calling-remote-function-modules">Calling remote function modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#looking-up-the-function-module">Looking up the function module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#calling-the-function-module">Calling the function module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parameters-and-return-values">Parameters and return values</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parameter-type-mappings">Parameter type mappings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#passing-options-when-calling-function-modules">Passing options when calling function modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#activating-deactivating-parameters">Activating/Deactivating parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#manually-clearing-the-function-module-description-cache">Manually clearing the function module description cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-module-details">Function module details</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#trace-levels">Trace levels</a></li>
<li class="toctree-l2"><a class="reference internal" href="#getting-the-version">Getting the version</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exceptions">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="building.html">Building from source</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">php7-sapnwrfc</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Usage</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<p>This guide describes commonly used functions of the <code class="docutils literal notranslate"><span class="pre">php7-sapnwrfc</span></code> extension.
For a more detailed overview of available methods, refer to the <a class="reference internal" href="api.html"><span class="doc">API overview</span></a>.</p>
<p>For getting started right away, refer to the <a class="reference internal" href="introduction.html#quick-start"><span class="std std-ref">Quick start</span></a>.</p>
<div class="section" id="connecting-to-a-sap-system">
<h2>Connecting to a SAP system<a class="headerlink" href="#connecting-to-a-sap-system" title="Permalink to this headline">¶</a></h2>
<p>To connect to a SAP system, we create a new instance of <code class="docutils literal notranslate"><span class="pre">SAPNWRFC\Connection</span></code>,
passing connection parameters:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$parameters</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;ashost&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;my.sap.system.local&#39;</span><span class="p">,</span>
    <span class="s1">&#39;sysnr&#39;</span>  <span class="o">=&gt;</span> <span class="s1">&#39;00&#39;</span><span class="p">,</span>
    <span class="s1">&#39;client&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;123&#39;</span><span class="p">,</span>
    <span class="s1">&#39;user&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;DEMO&#39;</span><span class="p">,</span>
    <span class="s1">&#39;passwd&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;XXXX&#39;</span><span class="p">,</span>
    <span class="c1">// if you need to connect through saprouter, uncomment the following line</span>
    <span class="c1">//&#39;saprouter&#39; =&gt; &#39;/H/my.saprouter.local/H/&#39;,</span>
<span class="p">];</span>

<span class="c1">// connect</span>
<span class="nv">$connection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SAPNWRFC\Connection</span><span class="p">(</span><span class="nv">$parameters</span><span class="p">);</span>

<span class="c1">// do work here</span>

<span class="c1">// close the connection</span>
<span class="nv">$connection</span><span class="o">-&gt;</span><span class="na">close</span><span class="p">();</span>
</pre></div>
</div>
<p>If the connection attempt fails, a <code class="docutils literal notranslate"><span class="pre">SAPNWRFC\ConnectionException</span></code> is thrown
with details about the error.</p>
<p>We can also use a <code class="docutils literal notranslate"><span class="pre">sapnwrfc.ini</span></code> file to specify connection details. See
<code class="docutils literal notranslate"><span class="pre">SAPNWRFC\Connection::setIniPath($path)</span></code> and <code class="docutils literal notranslate"><span class="pre">SAPNWRFC\Connection::reloadIniFile()</span></code>
in the <a class="reference internal" href="api.html"><span class="doc">API overview</span></a> for details.</p>
<p>For available connection parameters refer to the <a class="reference external" href="https://help.sap.com/viewer/753088fc00704d0a80e7fbd6803c8adb/7.5.9/en-US/48ce50e418d3424be10000000a421937.html">sapnwrfc.ini parameter overview</a>.</p>
<p>After we are done using the connection, it is recommended to close the connection
using <code class="docutils literal notranslate"><span class="pre">SAPNWRFC\Connection::close()</span></code>.</p>
<div class="section" id="connection-options">
<h3>Connection options<a class="headerlink" href="#connection-options" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2.0.</span></p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">SAPNWRFC\Connection</span></code> takes a second (optional) parameter specifying options for the connection.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="nv">$parameters</span> <span class="o">=</span> <span class="p">[</span> <span class="cm">/* &lt;...&gt; */</span> <span class="p">];</span>

<span class="nv">$options</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;use_function_desc_cache&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
<span class="p">];</span>

<span class="nv">$connection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SAPNWRFC\Connection</span><span class="p">(</span><span class="nv">$parameters</span><span class="p">,</span> <span class="nv">$options</span><span class="p">);</span>
</pre></div>
</div>
<p>The following options are available:</p>
<dl>
<dt>use_function_desc_cache</dt><dd><p>If set to <code class="docutils literal notranslate"><span class="pre">false</span></code> the local function desc cache is cleared before looking up a function
using <code class="docutils literal notranslate"><span class="pre">Connection::getFunction()</span></code>.
This can be useful if a function module signature changes in the backend while a script
is still running. If the script continues to use the old (cached) function description
this will result in garbage/missing values.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Setting this option to <code class="docutils literal notranslate"><span class="pre">false</span></code> can result in degraded performance as the
function description has to be fetched from the backend every time <code class="docutils literal notranslate"><span class="pre">Connection::getFunction()</span></code>
is called.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See <a class="reference internal" href="#manually-clearing-function-desc-cache"><span class="std std-ref">Manually clearing the function module description cache</span></a> for a way to clear the cache for individual
function modules.</p>
</div>
<p><em>Default:</em> <code class="docutils literal notranslate"><span class="pre">true</span></code></p>
</dd>
</dl>
</div>
</div>
<div class="section" id="calling-remote-function-modules">
<h2>Calling remote function modules<a class="headerlink" href="#calling-remote-function-modules" title="Permalink to this headline">¶</a></h2>
<div class="section" id="looking-up-the-function-module">
<h3>Looking up the function module<a class="headerlink" href="#looking-up-the-function-module" title="Permalink to this headline">¶</a></h3>
<p>Before we can call a remote function module, we have to lookup the desired
function module to retrieve a <code class="docutils literal notranslate"><span class="pre">SAPNWRFC\RemoteFunction</span></code> object. This is accomplished
with the <code class="docutils literal notranslate"><span class="pre">SAPNWRFC\Connection::getFunction($functionName)</span></code> method. We simply pass
the name of the remote function module:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="nv">$remoteFunction</span> <span class="o">=</span> <span class="nv">$connection</span><span class="o">-&gt;</span><span class="na">getFunction</span><span class="p">(</span><span class="s1">&#39;RFC_PING&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>If the lookup is successful, an object of type <code class="docutils literal notranslate"><span class="pre">SAPNWRFC\RemoteFunction</span></code> is returned
which can be used for invoking the function.</p>
<p>If the function lookup fails, a <code class="docutils literal notranslate"><span class="pre">SAPNWRFC\FunctionCallException</span></code> is thrown.</p>
</div>
<div class="section" id="calling-the-function-module">
<h3>Calling the function module<a class="headerlink" href="#calling-the-function-module" title="Permalink to this headline">¶</a></h3>
<p>After we have retrieved a <code class="docutils literal notranslate"><span class="pre">SAPNWRFC\RemoteFunction</span></code> object, we can invoke
the function module by using its <code class="docutils literal notranslate"><span class="pre">invoke()</span></code> method.</p>
<p>To invoke the function module <code class="docutils literal notranslate"><span class="pre">RFC_PING</span></code>, we can simply call <code class="docutils literal notranslate"><span class="pre">invoke()</span></code>
without parameters.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="nv">$returnValue</span> <span class="o">=</span> <span class="nv">$remoteFunction</span><span class="o">-&gt;</span><span class="na">invoke</span><span class="p">();</span>
</pre></div>
</div>
<p>If the function module returns parameters, <code class="docutils literal notranslate"><span class="pre">invoke()</span></code> returns them. On any
errors, a <code class="docutils literal notranslate"><span class="pre">SAPNWRFC\FunctionCallException</span></code> is thrown.</p>
</div>
<div class="section" id="parameters-and-return-values">
<h3>Parameters and return values<a class="headerlink" href="#parameters-and-return-values" title="Permalink to this headline">¶</a></h3>
<p>In practice, most of the remote function modules will require us to pass
parameters and/or will return parameters after invocation.</p>
<p>Passing parameters is possible using the <code class="docutils literal notranslate"><span class="pre">$parameters</span></code> array of the remote
function’s <code class="docutils literal notranslate"><span class="pre">invoke()</span></code> method. Parameters are passed as arrays, with the
key being the name of the parameter and the value the value to pass.</p>
<p>The same is true for return values. If a remote function module returns parameters,
they will be available in the array returned from <code class="docutils literal notranslate"><span class="pre">invoke()</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>ABAP function modules know four different types of parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">IMPORT</span></code>: set by the client.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EXPORT</span></code>: set by the server.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CHANGING</span></code>: set by the client and can be modified by the server.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TABLE</span></code>: set by the client and can be modified by the server.</p></li>
</ul>
</div>
<p>To call a function module <code class="docutils literal notranslate"><span class="pre">STFC_CHANGING</span></code> that requires input parameters as well
as returns parameters to the caller, we can do as follows:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="nv">$function</span> <span class="o">=</span> <span class="nv">$connection</span><span class="o">-&gt;</span><span class="na">getFunction</span><span class="p">(</span><span class="s1">&#39;STFC_CHANGING&#39;</span><span class="p">);</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$function</span><span class="o">-&gt;</span><span class="na">invoke</span><span class="p">([</span>
    <span class="s1">&#39;START_VALUE&#39;</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">&#39;COUNTER&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">]);</span>

<span class="cm">/*</span>
<span class="cm">$result looks like this:</span>

<span class="cm">array(2) {</span>
<span class="cm">  [&quot;COUNTER&quot;] =&gt; int(2)</span>
<span class="cm">  [&quot;RESULT&quot;] =&gt; int(1)</span>
<span class="cm">}</span>
<span class="cm">*/</span>
</pre></div>
</div>
<p>The types of the parameters and return values are mapped to standard PHP types.</p>
</div>
<div class="section" id="parameter-type-mappings">
<h3>Parameter type mappings<a class="headerlink" href="#parameter-type-mappings" title="Permalink to this headline">¶</a></h3>
<p>Remote function modules execute ABAP code and therefor use ABAB data types. This extension
maps between RFC data types and builtin PHP data types as follows:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 39%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ABAP type</p></th>
<th class="head"><p>RFC type</p></th>
<th class="head"><p>PHP type</p></th>
<th class="head"><p>Meaning</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>C</p></td>
<td><p>CHAR</p></td>
<td><p>string</p></td>
<td><p>Text field (alphanumeric characters)</p></td>
<td><p>right-padded with blanks; see <code class="docutils literal notranslate"><span class="pre">rtrim</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>D</p></td>
<td><p>DATE</p></td>
<td><p>string</p></td>
<td><p>Date field (format: YYYYMMDD)</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>T</p></td>
<td><p>TIME</p></td>
<td><p>string</p></td>
<td><p>Time field (format: HHMMSS)</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>X</p></td>
<td><p>BYTE</p></td>
<td><p>string</p></td>
<td><p>Hexadecimal field</p></td>
<td><p>use <code class="docutils literal notranslate"><span class="pre">hex2bin()</span></code> to convert to binary</p></td>
</tr>
<tr class="row-even"><td><p>N</p></td>
<td><p>NUM</p></td>
<td><p>string</p></td>
<td><p>Numeric text field</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>STRING</p></td>
<td><p>STRING</p></td>
<td><p>string</p></td>
<td><p>String (dynamic length)</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>XSTRING</p></td>
<td><p>BYTE</p></td>
<td><p>string</p></td>
<td><p>Hexadecimal string (dynamic length)</p></td>
<td><p>use <code class="docutils literal notranslate"><span class="pre">hex2bin()</span></code> to convert to binary</p></td>
</tr>
<tr class="row-odd"><td><p>I</p></td>
<td><p>INT</p></td>
<td><p>integer</p></td>
<td><p>Integer</p></td>
<td><p>INT1 and INT2 are also mapped to integer</p></td>
</tr>
<tr class="row-even"><td><p>P</p></td>
<td><p>BCD</p></td>
<td><p>double</p></td>
<td><p>Packed number / BCD</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>F</p></td>
<td><p>FLOAT</p></td>
<td><p>double</p></td>
<td><p>Floating point number</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>DECFLOAT16</p></td>
<td><p>DECF16</p></td>
<td><p>string</p></td>
<td><p>Decimal floating point number</p></td>
<td><p>Uses string to prevent rounding errors.</p></td>
</tr>
<tr class="row-odd"><td><p>DECFLOAT34</p></td>
<td><p>DECF34</p></td>
<td><p>string</p></td>
<td><p>Decimal floating point number</p></td>
<td><p>Uses string to prevent rounding errors.</p></td>
</tr>
</tbody>
</table>
<p>Additionally, there are also tables and structures:</p>
<ul class="simple">
<li><p>A structure is mapped to an associative array, with the keys being the field names
and the values the field values.</p></li>
<li><p>A table is an array of structures.</p></li>
</ul>
</div>
<div class="section" id="passing-options-when-calling-function-modules">
<h3>Passing options when calling function modules<a class="headerlink" href="#passing-options-when-calling-function-modules" title="Permalink to this headline">¶</a></h3>
<p>When calling function modules using <code class="docutils literal notranslate"><span class="pre">RemoteFunction::invoke()</span></code> a second parameter can
be passed specifying options for the function call.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="c1">// ...</span>
<span class="nv">$options</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;rtrim&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span>
<span class="p">];</span>

<span class="nv">$function</span><span class="o">-&gt;</span><span class="na">invoke</span><span class="p">(</span><span class="nv">$parameters</span><span class="p">,</span> <span class="nv">$options</span><span class="p">);</span>
</pre></div>
</div>
<p>The following options are available:</p>
<dl>
<dt>rtrim</dt><dd><p>In ABAP, there are two ways to store strings: as fixed length string type C or as dynamic
length type STRING. When using type C strings are right-padded with blanks, if the string
is shorter than the predefined length. To unify the extensions behaviour with strings, the
<code class="docutils literal notranslate"><span class="pre">rtrim</span></code> option is available. If set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, type C strings are right-trimmed before
being returned.</p>
<p><em>Default:</em> <code class="docutils literal notranslate"><span class="pre">false</span></code></p>
</dd>
</dl>
</div>
<div class="section" id="activating-deactivating-parameters">
<h3>Activating/Deactivating parameters<a class="headerlink" href="#activating-deactivating-parameters" title="Permalink to this headline">¶</a></h3>
<p>The <em>SAP NW RFC library</em> supports the activation and deactivation of parameters
of a function module. This is especially useful if a function module has a lot of
(possibly big) return values that you are not interested in.</p>
<p>To activate or deactivate a parameter, we call the method
<code class="docutils literal notranslate"><span class="pre">SAPNWRFC\RemoteFunction::setParameterActive($parameterName,</span> <span class="pre">$isActive)</span></code>
on the remote function object. We can use <code class="docutils literal notranslate"><span class="pre">SAPNWRFC\RemoteFunction::isParameterActive($parameterName)</span></code>
to check if a parameter is active or not.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="nv">$function</span> <span class="o">=</span> <span class="nv">$connection</span><span class="o">-&gt;</span><span class="na">getFunction</span><span class="p">(</span><span class="s1">&#39;STFC_STRUCTURE&#39;</span><span class="p">);</span>

<span class="nv">$function</span><span class="o">-&gt;</span><span class="na">setParameterActive</span><span class="p">(</span><span class="s1">&#39;IMPORTSTRUCT&#39;</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
<span class="nv">$function</span><span class="o">-&gt;</span><span class="na">setParameterActive</span><span class="p">(</span><span class="s1">&#39;RFCTABLE&#39;</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>

<span class="nv">$function</span><span class="o">-&gt;</span><span class="na">isParameterActive</span><span class="p">(</span><span class="s1">&#39;IMPORTSTRUCT&#39;</span><span class="p">);</span> <span class="c1">// returns false</span>

<span class="c1">// we don&#39;t need to pass parameters when invoking the function module,</span>
<span class="c1">// as we deactivated all of them</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$function</span><span class="o">-&gt;</span><span class="na">invoke</span><span class="p">([]);</span>

<span class="c1">// $result will not contain the &#39;RFCTABLE&#39; parameter</span>

<span class="nv">$function</span><span class="o">-&gt;</span><span class="na">setParameterActive</span><span class="p">(</span><span class="s1">&#39;RFCTABLE&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
<span class="nv">$function</span><span class="o">-&gt;</span><span class="na">isParameterActive</span><span class="p">(</span><span class="s1">&#39;IMPORTSTRUCT&#39;</span><span class="p">);</span> <span class="c1">// returns true</span>

<span class="c1">// we need to pass the &#39;RFC_TABLE&#39; parameter now</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$function</span><span class="o">-&gt;</span><span class="na">invoke</span><span class="p">([</span>
    <span class="s1">&#39;RFCTABLE&#39;</span> <span class="o">=&gt;</span> <span class="p">[],</span>
<span class="p">]);</span>
</pre></div>
</div>
</div>
<div class="section" id="manually-clearing-the-function-module-description-cache">
<span id="manually-clearing-function-desc-cache"></span><h3>Manually clearing the function module description cache<a class="headerlink" href="#manually-clearing-the-function-module-description-cache" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.0.</span></p>
</div>
<p>A call to <code class="docutils literal notranslate"><span class="pre">Connection::getFunction()</span></code> uses a local cache of the function module
descriptions to speed up the lookup. This usually is desired behaviour but can
lead to unexpected results when the function module signature changes in the
backend while a script is still running (missing/garbage return values, etc.).</p>
<p>In addition to setting the <code class="docutils literal notranslate"><span class="pre">use_function_desc_cache</span></code> option on the connection
level the cache can also be cleared for individual function modules using the
function <code class="docutils literal notranslate"><span class="pre">\SAPNWRFC\clearFunctionDescCache($functionName,</span> <span class="pre">$repositoryId</span> <span class="pre">=</span> <span class="pre">null)</span></code>.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="nx">\SAPNWRFC\clearFunctionDescCache</span><span class="p">(</span><span class="s1">&#39;STFC_STRUCTURE&#39;</span><span class="p">);</span>
<span class="c1">// or using the system ID</span>
<span class="nx">\SAPNWRFC\clearFunctionDescCache</span><span class="p">(</span><span class="s1">&#39;STFC_STRUCTURE&#39;</span><span class="p">,</span> <span class="s1">&#39;X01&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Manually clearing the function desc cache does not affect already
existing <code class="docutils literal notranslate"><span class="pre">RemoteFunction</span></code> objects:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="nv">$oldFn</span> <span class="o">=</span> <span class="nv">$connection</span><span class="o">-&gt;</span><span class="na">getFunction</span><span class="p">(</span><span class="s1">&#39;STFC_STRUCTURE&#39;</span><span class="p">);</span>
<span class="nx">\SAPNWRFC\clearFunctionDescCache</span><span class="p">(</span><span class="s1">&#39;STFC_STRUCTURE&#39;</span><span class="p">);</span>
<span class="nv">$newFn</span> <span class="o">=</span> <span class="nv">$connection</span><span class="o">-&gt;</span><span class="na">getFunction</span><span class="p">(</span><span class="s1">&#39;STFC_STRUCTURE&#39;</span><span class="p">);</span>

<span class="c1">// $oldFn still uses the old function description!</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="function-module-details">
<h3>Function module details<a class="headerlink" href="#function-module-details" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">SAPNWRFC\RemoteFunction</span></code> object defines a <code class="docutils literal notranslate"><span class="pre">name</span></code> property containing
the name of the function module it represents.</p>
<p>Additionally, a property for each parameter of the function module is defined
on the object that can be used to get detailed information about the parameter.</p>
</div>
</div>
<div class="section" id="trace-levels">
<h2>Trace levels<a class="headerlink" href="#trace-levels" title="Permalink to this headline">¶</a></h2>
<p>The <em>SAP NW RFC library</em> allows the creation of trace files to troubleshoot
connection and/or function call problems.</p>
<p>We can set the desired trace level via the <code class="docutils literal notranslate"><span class="pre">trace</span></code> parameter when
establishing the connection or change it at any time using the
<code class="docutils literal notranslate"><span class="pre">SAPNWRFC\Connection::setTraceLevel($level)</span></code> method.</p>
<p>The extension defines constants on the <code class="docutils literal notranslate"><span class="pre">SAPNWRFC\Connection</span></code> class
for the four trace levels (from least to most verbose): <code class="docutils literal notranslate"><span class="pre">TRACE_LEVEL_OFF</span></code>,
<code class="docutils literal notranslate"><span class="pre">TRACE_LEVEL_BRIEF</span></code>, <code class="docutils literal notranslate"><span class="pre">TRACE_LEVEL_VERBOSE</span></code>, <code class="docutils literal notranslate"><span class="pre">TRACE_LEVEL_FULL</span></code>.</p>
<p>Additionally, we can set the directory for the generated trace file
using <code class="docutils literal notranslate"><span class="pre">SAPNWRFC\Connection::setTraceDir($path)</span></code>. The default location
for the trace file is the current working directory.</p>
</div>
<div class="section" id="getting-the-version">
<h2>Getting the version<a class="headerlink" href="#getting-the-version" title="Permalink to this headline">¶</a></h2>
<p>The extension provides the methods <code class="docutils literal notranslate"><span class="pre">SAPNWRFC\Connection::version()</span></code> and
<code class="docutils literal notranslate"><span class="pre">SAPNWRFC\Connection::rfcVersion()</span></code> for getting the extension version
and the RFC SDK version in use.</p>
<p>Both methods return a string formatted as <code class="docutils literal notranslate"><span class="pre">MAJOR.MINOR.PATCH</span></code> (for example 1.1.3);</p>
</div>
<div class="section" id="exceptions">
<h2>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this headline">¶</a></h2>
<p>If an error occurs during any interaction, an exception is thrown with error details.
Currently, there are two exception classes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SAPNWRFC\ConnectionException</span></code> for any errors that concern the connection itself.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SAPNWRFC\FunctionCallException</span></code> for errors that stem from function module invocations.</p></li>
</ul>
<p>Both exception classes extend the base exception class <code class="docutils literal notranslate"><span class="pre">SAPNWRFC\Exception</span></code>, which
adds an additional <code class="docutils literal notranslate"><span class="pre">getErrorInfo()</span></code> method to the standard methods and properties
provided by <code class="docutils literal notranslate"><span class="pre">RuntimeException</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">getErrorInfo()</span></code> returns an array with detailed error information and contains
at least the keys <code class="docutils literal notranslate"><span class="pre">code</span></code>, <code class="docutils literal notranslate"><span class="pre">key</span></code> and <code class="docutils literal notranslate"><span class="pre">message</span></code>.</p>
<p>Depending on the type of error, the following additional keys might be available
with detailed information: <code class="docutils literal notranslate"><span class="pre">abapMsgClass</span></code>, <code class="docutils literal notranslate"><span class="pre">abapMsgType</span></code>, <code class="docutils literal notranslate"><span class="pre">abapMsgNumber</span></code>,
<code class="docutils literal notranslate"><span class="pre">abapMsgV1</span></code>, <code class="docutils literal notranslate"><span class="pre">abapMsgV2</span></code>, <code class="docutils literal notranslate"><span class="pre">abapMsgV3</span></code>, <code class="docutils literal notranslate"><span class="pre">abapMsgV4</span></code>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api.html" class="btn btn-neutral float-right" title="API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2016 - 2020 Gregor Kralik

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>